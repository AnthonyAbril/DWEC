<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <script>
      // Función para establecer una cookie
      function setCookie(nombre, valor, dias) {
        const fecha = new Date(); // Crea una fecha
        fecha.setDate(fecha.getDate() + dias); // Suma días a la fecha actual
        const expires = "expires=" + fecha.toUTCString(); // Fecha en formato UTC
        document.cookie = nombre + "=" + valor + ";" + expires + ";path=/"; // Configura la cookie
      }

      // Función para obtener una cookie
      function getCookie(name) {
        const cname = name + "="; // Inicio del cookie buscado con su nombre
        const ca = document.cookie.split(";"); // Divide las líneas del documento en un array
        for (let i = 0; i < ca.length; i++) {
          let c = ca[i].trim(); // Quita los espacios a ambos lados de la línea
          if (c.indexOf(cname) === 0) {
            return c.substring(cname.length, c.length); // Extrae el valor del cookie
          }
        }
        return "";
      }

      // Cargar los datos de las cookies al cargar la página
      function cargarFormulario() {
        const usuario = getCookie("usuario");
        const clave = getCookie("clave");
        const colorfondo = getCookie("colorfondo");

        if (usuario) document.getElementById("usuario").value = usuario;
        if (clave) document.getElementById("clave").value = clave;
        if (colorfondo) {
          document.getElementById("colorfondo").value = colorfondo;
          document.body.style.backgroundColor = colorfondo;
        }
      }

      // Guardar los datos en cookies cuando se envía el formulario
      function guardarFormulario(event) {
        event.preventDefault(); // Prevenir el comportamiento por defecto del formulario

        const recordar = document.getElementById("recordar").checked;
        const usuario = document.getElementById("usuario").value.trim();
        const clave = document.getElementById("clave").value.trim();
        const colorfondo = document.getElementById("colorfondo").value.trim();

        if (recordar) {
          // Validar los campos antes de guardar
          if (usuario === "" || clave === "" || colorfondo === "") {
            alert("Por favor, completa todos los campos antes de guardar.");
            return;
          }

          setCookie("usuario", usuario, 30); // Guardar por 30 días
          setCookie("clave", clave, 30);
          setCookie("colorfondo", colorfondo, 30);
        } else {
          // Borrar cookies si no está seleccionado "Recordar"
          setCookie("usuario", "", -1);
          setCookie("clave", "", -1);
          setCookie("colorfondo", "", -1);
        }

        // Cambiar el color de fondo después de guardar
        document.body.style.backgroundColor = colorfondo;
        alert("Formulario guardado correctamente.");
      }
    </script>
  </head>
  <body onload="cargarFormulario()">
    <form onsubmit="guardarFormulario(event)">
      <fieldset>
        <legend>Formulario de logueo personalizado</legend>
        <div>
          <label for="usuario">Usuario:</label>
          <input type="text" id="usuario" name="usuario" />
        </div>
        <div>
          <label for="clave">Contraseña:</label>
          <input type="password" id="clave" name="clave" />
        </div>
        <div>
          <label for="colorfondo">Color de Fondo:</label>
          <input
            type="text"
            id="colorfondo"
            name="colorfondo"
            placeholder="Ejemplo: #ffffff"
          />
        </div>
        <div>
          <input type="checkbox" id="recordar" name="recordar" />
          <label for="recordar">Recordar</label>
        </div>
        <button type="submit">Enviar</button>
      </fieldset>
    </form>
  </body>
</html>
